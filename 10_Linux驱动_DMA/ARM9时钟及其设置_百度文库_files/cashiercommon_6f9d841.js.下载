define("wktrade:widget/ui/mvp/event/event.js",function(e,t,r){var i=e("wkcommon:widget/ui/lib/jquery/jquery.js"),n=function(){};i.extend(n.prototype,{listeners:{},on:function(e,t){return e&&t?(this.listeners[e]||(this.listeners[e]=new i.Callbacks("unique")),this.listeners[e].has(t)||this.listeners[e].add(t),this):!1},fire:function(e,t){var r=t||!1,n=new i.Deferred,s=this;try{s.listeners[e].fire(r),n.resolve()}catch(o){console.error(o),n.reject(),n.eorrEx=o}return n},off:function(e,t){var r=this.listeners[e];return t?(r.remove(t),this):void r.empty()}}),r.exports=n});
;define("wktrade:widget/ui/mvp/presenter/presenter.js",function(e,a,t){var r=e("wkcommon:widget/ui/lib/jquery/jquery.js"),i=e("wktrade:widget/ui/mvp/model/model.js"),s=i.create({init:function(){this.initCashier()},defaultGoods:{vipcashier:{1:{eventType:"choice:changeMember",params:{type:"year",container:"year"}},4:{eventType:"choice:changeMember",params:{type:"month1Noble",container:"month1Noble"}},9:{eventType:"choice:selectMemberMenu",params:{$obj:r(".member-goods-list .member-option-monthlypay")}},3:{eventType:"choice:selectMemberMenu",params:{$obj:r(".choice-member .member-option-month3")}},8:{eventType:"choice:selectMemberMenu",params:{$obj:r(".member-goods-list .member-option-halfyear")}},10:{eventType:"choice:selectMemberMenu",params:{$obj:r(".member-goods-list .member-option-hour24")}}},eduvipcashier:{1:{eventType:"choice:changeMember",params:{type:"year",container:"year"}},2:{eventType:"choice:changeMember",params:{type:"halfyear",container:"halfyear"}},3:{eventType:"choice:selectMemberMenu",params:{$obj:r(".choice-member .member-option-month3")}},4:{eventType:"choice:selectMemberMenu",params:{$obj:r(".choice-member .member-option-month1Normal")}}},giftcardscashier:{5:{eventType:"gift:changeCards",params:{card:"classic",type:"year"}},6:{eventType:"gift:changeCards",params:{card:"share",type:"year"}}}},initCashier:function(){var e=this,a=window.lbscashier||{},t=function(){if(e.cashier.key=!0,e.PD.isFirst){var a;e.PD.defaultGoodsId?e.M.fire(e.defaultGoods[e.name][e.PD.defaultGoodsId].eventType,e.defaultGoods[e.name][e.PD.defaultGoodsId].params).then(function(){e.PD.isFirst=!1}):"wechatGotoTrade"!==e.PD.cashierName&&("giftcardscashier"===e.name||"giftcardsgototrade"===e.name?(a=e.PD.defaultParams||{card:"classic",type:"year"},e.M.fire("gift:changeCards",a).then(function(){e.PD.isFirst=!1})):"wechatGotoTrade"!==e.PD.cashierName&&(a=e.PD.defaultParams||{type:"year",container:"year"},e.M.fire("choice:changeMember",a).then(function(){e.PD.isFirst=!1})))}},r=[];if(1===+this.PD.isShowContract&&r.push("contract"),("gototrade"===this.PD.cashierName||"giftcardsgototrade"===this.PD.cashierName||"vippkgototrade"===this.PD.cashierName||"docpackgototrade"===this.PD.cashierName)&&r.push("wechat"),"wechatGotoTrade"===this.PD.cashierName&&r.push("bfb","alipay","bank","mobile","game","contract"),this.PD.isMonthlyPay&&("vipcashier"===this.PD.cashierName||"koolearncashier"===this.PD.cashierName||"docpackcashier"===this.PD.cashierName||"gototrade"===e.name&&17!==+e.PD.goodsType))e.cashier.key=!0,e.M.fire("choice:changeMember",{type:"year",container:"year"}),e.PD.isFirst=!1;else{this.cashier.obj=new a({onmessage:t,containerId:"lbscashier",tabNum:4,disabledChannel:r,hideDisabledChannel:1,payCheckUrl:e.URL.checkOrder,asycSubmit:1,samePage:1});var i=this.PD.initCashierUrl;this.PD.isWechat||(i+="&reqData="+escape('{"wechat_mode":"button"}')),this.cashier.obj.init(i)}},getData:function(e){return r.ajax({url:e,type:"get",cache:"false"})}});t.exports=s});
;define("wktrade:widget/ui/mvp/view/view.js",function(e,i,w){var r=(e("wkcommon:widget/ui/lib/jquery/jquery.js"),{});w.exports.view=r});
;define("wktrade:widget/cashier_header/cashier_header.js",function(e,n,t){var i=e("wktrade:widget/ui/mvp/model/model.js"),s=e("wkcommon:widget/ui/lib/jquery/jquery.js"),o=i.create({$el:null,E:{},init:function(){this.$el=s(".cashier-header-wrap").eq(0),this.initDomEvent(),this.addEventListener()},initDomEvent:function(){this.E.$userName=this.$el.find(".user-name"),this.E.$userInfoMenu=this.$el.find(".user-info-menu"),this.E.$contactUsBtn=this.$el.find(".contact-us-btn"),this.E.$contactUsInfo=this.$el.find(".contact-us-info")},addEventListener:function(){var e=this;this.E.$userName.hover(function(){e.E.$userInfoMenu.show()}),this.E.$contactUsBtn.hover(function(){e.E.$contactUsInfo.show()}),s(document).on("click",function(){e.E.$userInfoMenu.hide(),e.E.$contactUsInfo.hide()})}});t.exports=o});
;define("wktrade:widget/member_nav/member_nav.js",function(e,t,i){var a=e("wktrade:widget/ui/mvp/model/model.js"),n=e("wkcommon:widget/ui/lib/jquery/jquery.js"),r=a.create({$el:null,E:{},init:function(){this.$el=n(".member-nav").eq(0),this.publishEvent()},publishEvent:function(){var e=this;this.M.on("nav:setCurNavTab",n.proxy(e.setCurNavTab,e))},setCurNavTab:function(e){e.type&&this.$el.find("."+e.type).addClass("cur").find("a").attr("href","javascript:;")}});i.exports=r});
;define("wktrade:widget/cashier_renew/cashier_renew.js",function(e,n,i){var t=e("wktrade:widget/ui/mvp/model/model.js"),h=e("wkcommon:widget/ui/lib/jquery/jquery.js"),s=t.create({$el:null,E:{},init:function(){this.$el=h(".cashier-renew").eq(0),this.initDomEvent(),this.publishEvent()},initDomEvent:function(){this.E.$cashierRenewContent=this.$el.find(".cashier-renew-content")},publishEvent:function(){var e=this;this.M.on("renew:changeRenew",h.proxy(e.UIchangeRenew,e))},UIchangeRenew:function(){""!==this.PD.renewInfo&&null!==this.PD.renewInfo?(this.$el.show(),this.E.$cashierRenewContent.html(this.PD.renewInfo)):(this.$el.hide(),this.E.$cashierRenewContent.html(""))}});i.exports=s});
;define("wktrade:widget/cashier_special/cashier_special.js",function(e,i,h){var n=e("wktrade:widget/ui/mvp/model/model.js"),s=e("wkcommon:widget/ui/lib/jquery/jquery.js"),c=n.create({$el:null,E:{},init:function(){this.$el=s(".cashier-special-renew").eq(0),this.initDomEvent(),this.publishEvent()},initDomEvent:function(){this.E.$cashierSpecial=this.$el.find(".cashier-special-item"),this.E.$cashierRenew=this.$el.find(".cashier-renew-item")},publishEvent:function(){var e=this;this.M.on("special:changeSpecial",s.proxy(e.UIchangeSpecial,e)),this.M.on("renew:changeRenew",s.proxy(e.UIchangeRenew,e)),this.M.on("check:specialrenew",s.proxy(e.checkSpecialRenew,e))},UIchangeSpecial:function(){""!==this.PD.specialInfo?(this.$el.show(),this.E.$cashierSpecial.show(),this.E.$cashierSpecial.html(this.PD.specialInfo)):(this.E.$cashierSpecial.hide(),this.E.$cashierSpecial.html(""))},UIchangeRenew:function(){""!==this.PD.renewInfo?(this.$el.show(),this.E.$cashierRenew.show(),this.E.$cashierRenew.find(".cashier-renew-content").html(this.PD.renewInfo)):(this.E.$cashierRenew.hide(),this.E.$cashierRenew.find(".cashier-renew-content").html(""))},checkSpecialRenew:function(){this.M.fire("renew:changeRenew"),this.M.fire("special:changeSpecial"),""===this.PD.specialInfo&&""===this.PD.renewInfo&&this.$el.hide()}});h.exports=c});
;define("wktrade:widget/cashier_user_info/cashier_user_info.js",function(e,t,i){var a=(e("wktrade:widget/ui/mvp/model/model.js"),e("wkcommon:widget/ui/lib/jquery/jquery.js")),s=e("wkcommon:widget/ui/js_core/log/log.js"),n={init:function(){this.tipsTpl=[].join(""),this.getUserInfo()},getUserInfo:function(){var e=this;a.ajax({url:"/user/interface/getuserinfo?t="+(new Date).getTime(),method:"get",cache:!1,success:function(t){if(0===+t.status.code&&t.data.hasOwnProperty("vipinfo")&&t.data.vipinfo.type>0){var i=t.data.vipinfo,n=i.nor_end_time,r=(new Date).getTime(),o=Math.ceil((e.dateToStamp(n)-r)/86400/1e3,10);if(a(".cashier-special-renew .vip-date").html('\u7eed\u8d39\u4f1a\u5458\u751f\u6548\u65e5\u671f\uff1a<span class="red-tips">'+n+"</span>"),a(".cashier-special-renew .cashier-th").html("\u7eed\u8d39\u8bf4\u660e\uff1a"),o>15){var c=['<span class="vip-time-tips">','<i class="arrow"><b></b></i>','<i class="tag"></i>',"\u7eed\u8d39\u4f1a\u5458\u5c06\u5728"+o+"\u65e5\u540e\u751f\u6548\uff0c\u7acb\u523b\u8865\u5145\u4e0b\u8f7d\u7279\u6743\u8bf7",'<a href="/cashier/browse/vippackagecashier?cashier_code=vip_cashier_tips"target="_blank" class="log-xsend" data-logxsend="[1, 101029, {index:3}]">',"\u8d2d\u4e70VIP\u7279\u6743\u793c\u5305>","</a>","</span>"].join("");a(".cashier-user-info .cashier-tb").append(a(c)),s.xsend(1,101029,{index:1})}s.xsend(1,101029,{index:2})}}})},dateToStamp:function(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2]).getTime()},stampToDate:function(e){var t=new Date(e),i=t.getFullYear(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,s=t.getDate()<10?"0"+t.getDate():t.getDate();return i+"-"+a+"-"+s}};i.exports=n});
;define("wktrade:widget/cashier_vouchers/cashier_vouchers.js",function(e,c,i){var h=e("wktrade:widget/ui/mvp/model/model.js"),s=e("wkcommon:widget/ui/lib/jquery/jquery.js"),t=h.create({$el:null,E:{},selectedVoucher:null,init:function(){this.$el=s(".cashier-vouchers").eq(0),this.publishEvent(),this.initDomEvent(),this.addEventListener()},publishEvent:function(){var e=this;this.M.on("vouchers:getVouchers",s.proxy(e.getVouchers,e))},initDomEvent:function(){this.E.$vouchersName=this.$el.find(".vouchers-name"),this.E.$vouchersBar=this.$el.find(".vouchers-bar"),this.E.$vouchersMenu=this.$el.find(".vouchers-list-wrap"),this.E.$checkBtn=this.$el.find(".check-btn")},addEventListener:function(){var e=this;this.E.$vouchersBar.add(this.E.$vouchersName).on("click",function(c){c.stopPropagation(),e.E.$vouchersMenu.show()}),this.E.$checkBtn.click(function(){e.checkVoucherPrice()}),this.E.$vouchersMenu.on("click",".item",function(){var c=s(this).data("index"),i=e.PD.vouchers;e.selectedVoucher=i[c],e.PD.isVouchers=!0,e.setVoucher(e.PD.isVouchers)}),s(document).on("click",function(){e.E.$vouchersMenu.hide()})},setVoucher:function(e){var c=[this.formatPrice(this.selectedVoucher.voucher_price,0)+"\u5143",this.selectedVoucher.voucher_name,"\uff08\u6709\u6548\u671f\u81f3"+this.selectedVoucher.valid_time+"\uff09"].join("");this.E.$vouchersName.html(c),e&&(this.E.$checkBtn.prop("checked",!0),this.checkVoucherPrice())},checkVoucherPrice:function(){this.E.$checkBtn.prop("checked")?(this.PD.vouchersPrice=this.selectedVoucher.voucher_price,this.PD.isVouchers=!0,this.PD.isVoucherId=this.selectedVoucher.voucher_id):(this.PD.vouchersPrice=0,this.PD.isVouchers=!1),!this.PD.isFirst&&this.M.fire("price:checkprice")},resetVoucher:function(){this.E.$checkBtn.prop("checked",!1),this.PD.isVouchers=!1,this.PD.vouchersPrice=0},getVouchers:function(e){if(200===+e.goodsId)return s(".unable-vouchers").show(),this.$el.hide(),this.M.fire("exchange:hideExchange"),void(this.PD.isVouchers=!1);var c=this,i=["/cashier/interface/getvoucher?goods_id=",e.goodsId,"&goods_type=",e.goodsType,e.tradeId?"&trade_id="+e.tradeId:""].join("");s(".unable-vouchers").hide(),this.resetVoucher(),s.ajax({url:i,type:"get",async:!1,cache:!1}).done(function(e){var i=[],h=0;if(e&&0===e.status.code&&e.data.voucher_info&&e.data.voucher_info.length>0){var s=e.data.voucher_info;c.PD.vouchers=s,c.selectedVoucher=s[0];for(var t=s.length;t>h;h++){var r=c.formatPrice(s[h].voucher_price,0)+"\u5143";r+=s[h].voucher_name,r+="\uff08\u6709\u6548\u671f\u81f3"+s[h].valid_time+"\uff09",i.push('<li class="item" data-index="'+h+'">'),i.push('<a href="javascript:;" title="'+r+'">'),i.push(r),i.push("</a>"),i.push("</li>"),1===+s[h].is_selected&&(c.selectedVoucher=s[h],c.PD.isVouchers=!0)}c.$el.find(".vouchers-list-layout ul").html(i.join("")),c.setVoucher(c.PD.isVouchers),c.$el.show()}else c.$el.hide()})}});i.exports=t});
;define("wktrade:widget/cashier_sale_price/cashier_sale_price.js",function(i,e,s){var t=i("wkcommon:widget/ui/lib/jquery/jquery.js"),c=i("wktrade:widget/ui/mvp/model/model.js"),r=c.create({$el:null,E:{},init:function(){this.$el=t(".cashier-sale-price").eq(0),this.initDomEvent(),this.publishEvent()},initDomEvent:function(){this.E.$actualPrice=this.$el.find(".actual-price"),this.E.$actualPriceDesc=this.$el.find(".actual-price-desc")},publishEvent:function(){var i=this;this.M.on("price:checkprice",t.proxy(i.checkSalePrice,i))},checkSalePrice:function(){var i=this,e="\u5143",s=this.PD.salePrice;if(this.cashier.key)if(this.cashier.key=!1,s-=this.PD.isVouchers===!0?this.PD.vouchersPrice:0,s-=this.PD.isOtherPrice===!0?this.PD.otherPrice:0,s=Number(s)+(this.PD.isDocPack===!0?Number(this.PD.docSalePrice):0),this.PD.actualPrice=s,this.E.$actualPrice.html(i.formatPrice(i.PD.actualPrice,2)),this.PD.savePrice=Number(this.PD.price)+Number(this.PD.docPrice)-this.PD.actualPrice,0!==this.PD.savePrice&&(e="\u5143\uff08\u8282\u7701"+i.formatPrice(this.PD.savePrice)+"\u5143\uff09"),this.E.$actualPriceDesc.html("\u5143"),this.PD.isWechat||this.PD.isMonthlyPay&&("vipcashier"===this.PD.cashierName||"koolearncashier"===this.PD.cashierName||"docpackcashier"===this.PD.cashierName||"gototrade"===this.PD.cashierName&&17!==+this.PD.goodsType))this.cashier.key=!0;else{var t=this.cashierInitUrl();this.cashier.obj.updateOrder(t)}}});s.exports=r});
;define("wktrade:widget/cashier_baifubao/cashier_baifubao.js",function(e,i,t){var n=e("wktrade:widget/ui/mvp/model/model.js"),s=e("wkcommon:widget/ui/lib/jquery/jquery.js"),h=n.create({$el:null,E:{},init:function(){this.$el=s(".cashier-baifubao-agreement").eq(0),this.initDomEvent(),this.addEventListener()},initDomEvent:function(){this.E.$agreementCheckbox=this.$el.find(".agreement-checkbox"),this.E.$mark=this.$el.find(".cashier-baifubao-mark"),this.E.$lbscashier=this.$el.find(".lbscashier")},addEventListener:function(){var e=this;this.E.$agreementCheckbox.on("click",function(){e.checkIsAgreement()})},checkIsAgreement:function(){this.E.$agreementCheckbox.prop("checked")?(this.PD.isAgreement=!0,this.E.$mark.hide()):(this.PD.isAgreement=!1,this.E.$mark.show())}});t.exports=h});